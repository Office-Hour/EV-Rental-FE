<section class="min-h-screen bg-gray-50 py-10 md:py-16">
  <div class="w-full max-w-7xl mx-auto flex flex-col gap-6 px-6 md:px-10">
    <header class="flex flex-col gap-2 text-center md:text-left md:gap-3">
      <p class="text-xs font-semibold uppercase tracking-widest text-emerald-500">Tìm xe tự lái</p>
      <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold text-slate-900 leading-tight">
        Chọn chiếc xe phù hợp nhất cho nhu cầu di chuyển
      </h1>
      <p class="max-w-2xl text-sm text-slate-600 leading-relaxed md:mx-0 mx-auto">
        Ứng dụng bộ lọc nhiều tiêu chí để tìm nhanh dòng xe phù hợp theo ngân sách, tiện ích và khu
        vực mong muốn. Đặt xe trực tuyến chỉ trong vài phút với hỗ trợ 24/7 và chính sách giao nhận
        linh hoạt.
      </p>
    </header>

    <div class="w-full">
      <div
        class="flex flex-wrap items-center justify-center gap-3 md:gap-7 p-5 md:p-7 bg-white border border-slate-200/30 rounded-3xl shadow-lg"
      >
        <button
          mat-raised-button
          class="flex-0 min-w-[140px] font-bold uppercase tracking-wide rounded-full px-7 py-1 transition-transform hover:-translate-y-0.5 disabled:opacity-25 disabled:cursor-not-allowed bg-emerald-500 text-white"
          type="button"
          (click)="resetFilters()"
          [disabled]="!hasActiveFilters()"
        >
          Tất cả
        </button>

        <mat-form-field appearance="outline" class="flex-1 min-w-[220px] md:min-w-[280px]">
          <mat-label>Số chỗ</mat-label>
          <mat-select multiple [value]="selectedSeatValues()" (valueChange)="onSeatChanged($event)">
            @for (seat of seatOptions; track seat) {
              <mat-option [value]="seat">{{ seatLabel(seat) }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="flex-1 min-w-[220px] md:min-w-[280px]">
          <mat-label>Hãng xe</mat-label>
          <mat-select [value]="selectedBrand()" (valueChange)="onBrandChanged($event)">
            <mat-option [value]="null">Tất cả</mat-option>
            @for (brand of brandOptions; track brand) {
              <mat-option [value]="brand">{{ brand }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field
          appearance="outline"
          class="flex-1 min-w-[220px] md:min-w-[280px]"
          [class.opacity-60]="!availableModels().length"
        >
          <mat-label>Mẫu xe</mat-label>
          <mat-select
            multiple
            [value]="selectedModelValues()"
            (valueChange)="onModelsChanged($event)"
            [disabled]="!availableModels().length"
          >
            @for (model of availableModels(); track model) {
              <mat-option [value]="model">{{ model }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="flex-1 min-w-[220px] md:min-w-[280px]">
          <mat-label>Khu vực</mat-label>
          <mat-select [value]="selectedLocation()" (valueChange)="onLocationChanged($event)">
            <mat-option [value]="null">Tất cả</mat-option>
            @for (location of locationOptions; track location) {
              <mat-option [value]="location">{{ location }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="flex-1 min-w-[220px] md:min-w-[280px]">
          <mat-label>Sắp xếp</mat-label>
          <mat-select [value]="selectedSort()" (valueChange)="onSortChanged($event)">
            @for (option of sortOptions; track option.value) {
              <mat-option [value]="option.value">{{ option.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div
      class="flex flex-col gap-3 p-5 md:p-7 bg-white rounded-2xl shadow-lg border border-slate-200/30 md:flex-row md:items-center md:justify-between"
    >
      <p class="text-sm text-slate-600 m-0">
        Tìm thấy <span class="text-emerald-600 font-semibold">{{ resultCount() }}</span> trong tổng
        số {{ totalAvailableCars }} xe.
      </p>
      <button
        mat-stroked-button
        type="button"
        class="font-semibold tracking-wide text-emerald-600 border-emerald-400/40 disabled:text-slate-300 disabled:border-slate-200/20 self-start md:self-auto"
        (click)="resetFilters()"
        [disabled]="!hasActiveFilters()"
      >
        Đặt lại bộ lọc
      </button>
    </div>

    @if (filteredCars().length) {
      <div
        class="grid grid-cols-4 gap-5 md:gap-8 justify-center items-stretch w-full mx-auto overflow-x-auto"
      >
        @for (car of filteredCars(); track car.id) {
          <app-car-card [car]="car" />
        }
      </div>
    } @else {
      <div
        class="rounded-3xl border border-emerald-200/35 bg-emerald-50 p-8 text-center text-slate-600 shadow-lg md:p-12"
      >
        <h2 class="text-xl font-semibold text-emerald-700 mb-2">
          Không có xe theo kết quả tìm kiếm này!
        </h2>
        <p class="text-sm mb-0">
          Vui lòng kiểm tra lại thông tin liên hệ. Chúng tôi sẽ liên hệ bạn trong thời gian sớm
          nhất.
        </p>
      </div>
    }
  </div>
</section>
