<div class="car-detail-shell w-full max-w-7xl mx-auto py-6 lg:py-10">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Left: main content -->
    <div class="lg:col-span-2 space-y-6">
      <!-- Gallery ảnh xe -->
      <section class="card-glow overflow-hidden bg-gray-100">
        <div class="p-4">
          <div class="aspect-video lg:aspect-auto rounded-lg bg-gray-200 overflow-hidden">
            <div
              class="h-full w-full flex items-center justify-center px-4 pt-6 pb-4 sm:px-6 sm:pt-8 sm:pb-6"
            >
              <img
                src="/imgi_3_car11.png"
                alt="VF6 exterior front view"
                class="max-h-full max-w-full object-contain"
              />
            </div>
          </div>
        </div>
      </section>

      <!-- Title -->
      <section>
        <div class="p-5 card-glow">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div>
              <h1 class="text-2xl font-semibold tracking-tight">VinFast VF6 Eco</h1>
              <div class="mt-2 flex flex-wrap items-center gap-3 text-sm text-gray-600">
                <span class="badge-soft-emerald">
                  <span class="material-symbols-outlined text-base leading-none align-middle"
                    >bolt</span
                  >
                  Mới
                </span>
                <span class="inline-flex items-center gap-1 text-gray-600">
                  <span class="material-symbols-outlined text-base leading-none align-middle"
                    >location_on</span
                  >
                  Quận Bình Thạnh
                </span>
                <button class="inline-flex items-center gap-1 text-blue-600 hover:text-blue-700">
                  <span class="material-symbols-outlined text-base leading-none align-middle"
                    >share</span
                  >
                  Chia sẻ
                </button>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-sm font-medium text-gray-500">Đánh giá</span>
              <div class="flex items-center gap-1 text-amber-500">
                <i class="ri-star-fill text-2xl leading-none align-middle"></i>
                <i class="ri-star-fill text-2xl leading-none align-middle"></i>
                <i class="ri-star-fill text-2xl leading-none align-middle"></i>
                <i class="ri-star-fill text-2xl leading-none align-middle"></i>
                <i class="ri-star-half-fill text-2xl leading-none align-middle"></i>
              </div>
              <span class="text-sm text-gray-600 font-medium">4.8/5</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Đặc điểm -->
      <section class="card-glow">
        <div class="p-5">
          <h2 class="section-heading mb-4">Đặc điểm</h2>
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
            <div class="feature-item">
              <span class="material-symbols-outlined">group</span>
              <span>7 chỗ</span>
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">settings</span>
              <span>Số tự động</span>
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">local_gas_station</span>
              <span>Nhiên liệu: Dầu</span>
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">speed</span>
              <span>7l/100km</span>
            </div>
          </div>
          <div class="my-6 border-t border-dashed border-emerald-100/80"></div>
          <h3 class="text-base font-semibold text-emerald-900 mb-2">Mô tả</h3>
          <p class="text-sm leading-6 text-gray-700">
            Phiên bản hybrid dung hòa giữa vận hành êm ái và tiết kiệm của Kia Carnival 2024. Nội
            thất rộng rãi 3 hàng ghế, phù hợp gia đình hoặc chuyến đi nhóm nhỏ.
          </p>
        </div>
      </section>

      <!-- Location -->
      <section class="card-glow">
        <div class="p-6 space-y-4">
          <h2 class="section-heading">Vị trí xe</h2>
          <div class="info-callout">
            <div class="info-callout__title">
              <span class="material-symbols-outlined text-emerald-500">location_on</span>
              Điểm giao nhận tiêu chuẩn
            </div>
            <p class="text-sm leading-6 text-gray-900">
              183 Nguyễn Hữu Cảnh, Phường 22, Quận Bình Thạnh. Hỗ trợ giao nhận tận nơi trong bán
              kính 5km với phụ phí nhỏ.
            </p>
          </div>
        </div>
      </section>

      <!-- Các tiện nghi khác -->
      <section class="card-glow">
        <div class="p-5">
          <h2 class="section-heading mb-4">Các tiện nghi khác</h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 gap-3">
            <div class="feature-item">
              <span class="material-symbols-outlined">sensors</span>
              Cảm biến
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">bluetooth</span>
              Bluetooth
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">videocam</span>
              Camera 360°
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">lightbulb</span>
              Đèn LED
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">sensor_occupied</span>
              Cảm biến lùi
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">map</span>
              Bản đồ
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">tv</span>
              Màn hình DVD
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">gpp_maybe</span>
              Cảnh báo lệch làn
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">usb</span>
              Cổng USB
            </div>
            <div class="feature-item">
              <span class="material-symbols-outlined">block</span>
              ETC
            </div>
          </div>
        </div>
      </section>

      <!-- Terms -->
      <section class="card-glow">
        <div class="p-5 space-y-4">
          <h2 class="section-heading">Điều khoản</h2>
          <ul class="list-disc pl-5 text-sm text-gray-900 space-y-2 marker:text-emerald-500">
            <li>Không hút thuốc, không chở hàng cấm, không thú cưng.</li>
            <li>Hoàn xăng theo mức khi nhận xe, giữ vệ sinh.</li>
            <li>Phạt do vi phạm giao thông do khách tự chi trả.</li>
            <li>Xe có bảo hiểm vật chất hai chiều.</li>
          </ul>
        </div>
      </section>

      <!-- Cancellation Policy -->
      <section class="card-glow">
        <div class="p-5 space-y-3">
          <h2 class="section-heading">Chính sách hủy chuyến</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full text-sm border border-gray-200 rounded-lg overflow-hidden">
              <thead class="bg-gray-50 text-gray-700">
                <tr>
                  <th class="text-left p-3 border-b">Thời điểm</th>
                  <th class="text-left p-3 border-b">Phí áp dụng</th>
                </tr>
              </thead>
              <tbody class="divide-y">
                <tr>
                  <td class="p-3">Hơn 5 ngày trước chuyến</td>
                  <td class="p-3">Hoàn 100% cọc</td>
                </tr>
                <tr>
                  <td class="p-3">3–5 ngày trước chuyến</td>
                  <td class="p-3">Phí 30% tổng tiền</td>
                </tr>
                <tr>
                  <td class="p-3">Trong 48 giờ trước chuyến</td>
                  <td class="p-3">Phí 50% tổng tiền</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Owner info -->
      <section class="card-glow">
        <div class="p-5">
          <h2 class="section-heading mb-3">Thông tin tổ chức</h2>
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-gray-200"></div>
            <div>
              <div class="font-medium">Voltera</div>
              <div class="text-sm text-gray-600">Xe được vận hành bởi Voltera</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Right: booking card -->
    <aside class="lg:col-span-1">
      <div class="sticky top-0">
        <div class="booking-card">
          <div class="booking-card__header">
            <div class="flex items-end gap-2">
              <div class="booking-card__price">970K</div>
              <div class="booking-card__subtitle">/1 ngày</div>
            </div>
            <span class="booking-chip mt-4">Giá đã bao gồm VAT</span>
          </div>
          <!-- Ngày giao nhận xe -->
          <div class="booking-card__body">
            <form [formGroup]="form" class="w-full">
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Thời gian thuê</mat-label>

                <mat-date-range-input
                  formGroupName="range"
                  [rangePicker]="bookingRangePicker"
                  [dateFilter]="isDateAvailable"
                >
                  <input matStartDate formControlName="start" placeholder="Bắt đầu" />
                  <input matEndDate formControlName="end" placeholder="Kết thúc" />
                </mat-date-range-input>

                <mat-datepicker-toggle
                  matIconSuffix
                  [for]="bookingRangePicker"
                ></mat-datepicker-toggle>
                <mat-date-range-picker
                  #bookingRangePicker
                  [dateClass]="dateClass"
                ></mat-date-range-picker>

                <!-- mat-error sẽ xuất hiện khi start/end invalid -->
                <mat-error
                  *ngIf="
                    (form.controls.range.controls.start.invalid ||
                      form.controls.range.controls.end.invalid) &&
                    (form.controls.range.controls.end.touched ||
                      form.controls.range.controls.start.touched)
                  "
                >
                  {{ rangeError || 'Khoảng thời gian không hợp lệ.' }}
                </mat-error>
              </mat-form-field>
            </form>
            <!-- Ngày đã được đặt trước -->
            <div class="rounded-lg border border-red-200 bg-red-50 p-3 text-xs text-red-600">
              <div class="font-semibold">Các ngày đã được đặt trước</div>
              <div class="mt-2 flex flex-wrap gap-2">
                <span
                  *ngFor="let date of bookedDates"
                  class="inline-flex items-center rounded-full border border-red-200 bg-white px-2 py-0.5 font-medium"
                >
                  {{ date | date: 'dd/MM/yyyy' }}
                </span>
              </div>
              <div class="mt-2 text-[11px] text-red-500">
                Các ngày này sẽ hiển thị màu xám và không thể chọn.
              </div>
            </div>
            <!-- Giờ giao nhận xe -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Giờ giao</mat-label>
                <mat-select [(ngModel)]="startTime">
                  <mat-option value="">Chọn giờ</mat-option>
                  <mat-option *ngFor="let hour of hourOptions" [value]="hour">{{
                    hour
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Giờ nhận</mat-label>
                <mat-select [(ngModel)]="endTime">
                  <mat-option value="">Chọn giờ</mat-option>
                  <mat-option *ngFor="let hour of hourOptions" [value]="hour">{{
                    hour
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!-- Vị trí đậu xe -->
            <div class="space-y-2">
              <div class="text-sm font-medium">Vị trí đậu</div>
              <div class="rounded-lg border border-emerald-200 bg-emerald-50 text-sm p-3">
                183 Nguyễn Hữu Cảnh, Phường 22, Quận Bình Thạnh
              </div>
            </div>
            <!-- Bảo hiểm tickbox -->
            <div class="flex items-center gap-2 text-sm">
              <input id="ins" type="checkbox" class="rounded border-gray-300" checked />
              <label for="ins">Xe đã bảo hiểm vật chất hai chiều</label>
            </div>
            <!-- Tổng tiền -->
            <div class="booking-card__divider"></div>
            <div class="space-y-2 text-sm text-emerald-900">
              <div class="flex justify-between">
                <span>Phí thuê xe</span><span>5.697.500đ</span>
              </div>
              <div class="flex justify-between text-red-600">
                <span>Giảm giá</span><span>-569.750đ</span>
              </div>
              <div class="flex justify-between"><span>Thuế VAT</span><span>455.800đ</span></div>
              <div class="booking-card__divider"></div>
              <div class="flex justify-between font-semibold text-emerald-900">
                <span>Tổng tạm tính</span><span>5.583.550đ</span>
              </div>
            </div>
            <!-- Thuê xe button -->
            <button class="btn-emerald">Thuê xe</button>
            <div class="text-xs text-emerald-900/70 leading-relaxed">
              Bằng việc nhấn đặt cọc/thuê xe, bạn đồng ý với Điều khoản sử dụng và Chính sách bảo
              mật.
            </div>
          </div>
        </div>
        <!-- Các chi phí khác -->
        <div class="mt-4 card-glow p-5 text-sm space-y-2">
          <h3 class="font-semibold">Các chi phí khác</h3>
          <div class="flex justify-between"><span>Phí vệ sinh</span><span>100.000đ</span></div>
          <div class="flex justify-between">
            <span>Giao nhận xe</span><span>120.000–150.000đ</span>
          </div>
        </div>
      </div>
    </aside>
  </div>
</div>
